# 펌프업 (서사 확장) 스펙

> 작성일: 2026-01-22
> 상태: 스펙 정의 완료

## 개요

짧은 스토리 입력을 소설처럼 풍부하게 확장하여 L1 Scene Architect의 입력 품질을 높임.
**핵심**: 서사 보존 + 분량 확장

---

## 목적

1. **입력 품질 향상**: 짧은 로그라인/시놉시스를 영상화 가능한 수준으로 확장
2. **서사 보존 강화**: 원작의 감정, 명칭, 핵심 이미지를 유지하며 확장
3. **시각화 요소 추가**: 장면 묘사, 감각적 디테일 추가

---

## 현재 문제점

### BUG-001에서 발견된 이슈
- 짧은 입력 → L1 → 추상적인 scene summary
- 원작의 구체적 명칭/감정 손실
- 예: "루테란", "패자의 검" → "young warrior", "sword"

### 원인
- L1이 짧은 입력에서 충분한 컨텍스트를 얻지 못함
- 씬 분할에 집중하다 보니 서사 디테일 생략

---

## 해결 방안: 펌프업 단계 추가

### 파이프라인 변경

```
[기존]
Story Input → L1 (Scene Architect) → Scenes

[변경]
Story Input → Pumpup → Expanded Story → L1 (Scene Architect) → Scenes
```

### 펌프업 동작

```
입력: 짧은 스토리 (100~500자)
출력: 확장된 스토리 (1000~3000자)
```

---

## 확장 규칙

### 1. 보존해야 할 것 (MUST PRESERVE)

| 요소 | 예시 |
|------|------|
| 고유명사 | 루테란, 아제나, 카제로스 |
| 핵심 대사 | "이 검은 패자의 것이 아니다" |
| 감정 톤 | 비장함, 결의, 슬픔 |
| 핵심 이미지 | 황혼의 전장, 빛나는 검 |
| 인과관계 | A 때문에 B가 발생 |

### 2. 추가해야 할 것 (SHOULD ADD)

| 요소 | 설명 | 예시 |
|------|------|------|
| 시각 묘사 | 장면의 구체적 모습 | "석양빛에 물든 갑옷", "피로 얼룩진 대지" |
| 감각 디테일 | 오감 정보 | "차가운 바람", "피비린내" |
| 동작 구체화 | 행동의 세부 묘사 | "천천히 검을 들어올렸다" |
| 감정 내면화 | 캐릭터의 내면 | "가슴 속에서 타오르는 분노" |
| 시간/공간 | 배경 구체화 | "황혼녘, 전투가 끝난 평원" |

### 3. 하지 말아야 할 것 (MUST NOT)

- 원작에 없는 새로운 캐릭터 추가
- 스토리 전개 변경
- 원작 설정과 충돌하는 내용 추가
- 과도한 형용사 남발 (Purple prose)

---

## 참조 소스 우선순위

```
1. 원작 로어/설정 (specs/lore/*.md)
   - 있으면 최우선 참조
   - 캐릭터 배경, 세계관 설정

2. 외부 자료 (웹 검색)
   - 원작이 있는 IP인 경우 나무위키/위키 등
   - 실존 인물/사건인 경우 역사 자료

3. LLM 상상력
   - 위 소스로 커버 안 되는 부분
   - 원작 톤에 맞게 생성
```

---

## 구현 설계

### 옵션 A: L1 전처리 (Pre-processor)

```python
class StoryPumpup:
    def expand(
        self,
        story: str,
        lore_context: Optional[str] = None,  # specs/lore/ 내용
        target_length: int = 2000,           # 목표 글자수
    ) -> str:
        """짧은 스토리를 확장"""
        pass
```

### 옵션 B: L1 내부 통합

```python
class SceneArchitect:
    def __init__(self, enable_pumpup: bool = True):
        self.enable_pumpup = enable_pumpup

    def process(self, story: str, **kwargs) -> List[Scene]:
        if self.enable_pumpup and len(story) < 500:
            story = self._pumpup(story, **kwargs)
        return self._split_scenes(story)
```

### 추천: 옵션 A
- 단일 책임 원칙
- 펌프업 여부를 파이프라인에서 제어 가능
- 테스트 용이

---

## 프롬프트 설계 (초안)

```
당신은 스토리 확장 전문가입니다.
주어진 짧은 스토리를 영상화하기 좋은 형태로 확장하세요.

## 입력
- 원본 스토리: {story}
- 참조 로어: {lore_context}  # optional
- 목표 분량: {target_length}자

## 규칙
1. 반드시 보존:
   - 모든 고유명사 (인명, 지명, 아이템명)
   - 핵심 대사 (있는 경우)
   - 스토리의 감정 톤
   - 인과관계와 전개 순서

2. 추가할 것:
   - 시각적 장면 묘사 (색감, 빛, 그림자)
   - 감각적 디테일 (소리, 냄새, 촉감)
   - 캐릭터 동작의 구체화
   - 배경/환경 묘사

3. 금지:
   - 원작에 없는 캐릭터 추가
   - 스토리 전개 변경
   - 과도한 형용사 (매 문장마다 수식어)

## 출력 형식
확장된 스토리를 산문 형식으로 출력하세요.
```

---

## 예시

### 입력 (150자)
```
루테란은 전장에서 홀로 살아남았다. 동료들의 시체 사이에 서서 패자의 검을
들어올린다. "이 싸움은 끝나지 않았다."
```

### 출력 (800자)
```
황혼이 내려앉은 전장에는 수천 구의 시체가 널려 있었다. 한때 푸르렀던
평원은 이제 핏빛으로 물들어 있었다. 차가운 바람이 불어와 피비린내를
실어 날랐다.

그 한가운데, 루테란이 서 있었다. 금빛 갑옷은 적의 피와 자신의 땀으로
얼룩져 있었고, 파란 망토는 반쯤 찢겨 나간 채 바람에 나부꼈다. 그의
발밑에는 함께 싸웠던 동료들이 눈을 감지 못한 채 쓰러져 있었다.

천천히, 루테란은 패자의 검을 들어올렸다. 에스더 갈라투르가 만들어준
이 전설의 무기는 석양빛을 받아 금빛으로 타올랐다. 검날에 맺힌 핏방울이
땅으로 떨어졌다.

"이 싸움은 끝나지 않았다."

그의 목소리는 낮았지만 단단했다. 회색 가닥이 섞인 검은 머리카락
사이로 결연한 눈빛이 빛났다. 패배했지만 꺾이지 않은, 쓰러졌지만
일어서는 자의 눈이었다.
```

---

## 검증 기준

| 항목 | 기준 |
|------|------|
| 고유명사 보존율 | 100% (하나라도 누락 시 실패) |
| 핵심 대사 보존 | 원문 그대로 포함 |
| 분량 증가 | 입력의 3~10배 |
| 톤 일관성 | 입력이 비장하면 출력도 비장 |

---

## 미해결 사항

- [ ] 옵션 A vs B 최종 결정
- [ ] 목표 분량 기본값 (1500? 2000?)
- [ ] 로어 컨텍스트 자동 주입 방법

---

## 변경 이력

| 날짜 | 내용 |
|------|------|
| 2026-01-22 | 스펙 인터뷰 기반 초안 작성 |
